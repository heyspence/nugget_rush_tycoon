!function(){"use strict";var t,e,s,i,n,a;t=class{constructor(t,e,s){this.ctx=t,this.pos=[e[0]-30,e[1]-40],this.size=[140,15],this.loadTime=1e4,this.currentWidth=0,this.clickableObject=s,this.complete=!1,this.animating=!1,this.drawBackground()}animate=()=>{if(this.animating)return;const t=()=>{this.complete?this.reset():(this.currentWidth>=this.size[0]&&(this.ctx.clearRect(...this.pos,...this.size),this.clickableObject.addToTotal(1),this.complete=!0),this.animating=!0,this.currentWidth+=1,this.update(),requestAnimationFrame(t))};t()};update(){this.ctx.fillStyle="rgb(253 214 67)",this.ctx.fillRect(this.pos[0]+2,this.pos[1]+3,this.currentWidth,this.size[1])}isComplete(){return this.currentWidth>=this.size[0]}reset(){this.drawBackground(),this.currentWidth=0,this.update(),this.animating=!1,this.complete=!1}drawBackground(){this.ctx.fillStyle="black",this.ctx.fillRect(this.pos[0]-2,this.pos[1],this.size[0]+6,this.size[1]+6)}},e=class{constructor(e,s,i){this.ctx=e,this.img=s.img,this.size=s.size,this.pos=s.pos,this.headerContent=i,this.loadTime=s.loadTime,this.scale=s.scale?s.scale:[1,1];const n=new t(this.ctx,this.pos,this);this.progressBar=n,this.drawImg()}drawImg(){const t=new Image;t.onload=()=>{this.ctx.save(),this.ctx.scale(...this.scale),this.ctx.drawImage(t,...this.pos,...this.size),this.ctx.restore()},t.src=this.img}clickHandler(t){const e=[this.pos[0],this.pos[0]+this.size[0]],s=t.canvasX>=e[0]&&t.canvasX<=e[1],i=[this.pos[1],this.pos[1]+this.size[1]],n=t.canvasY>=i[0]&&t.canvasY<=i[1];s&&n&&this.progressBar.animate()}addToTotal(t){this.headerContent.cashOnHand=this.headerContent.cashOnHand+t,this.headerContent.renderTotal()}autoClick(){setInterval(this.progressBar.animate,450)}displayVictoryCrown(t){const e=new Image;e.onload=()=>{this.ctx.save(),this.ctx.scale(...this.scale),this.ctx.drawImage(e,this.pos[0]-15,this.pos[1]-40,100,110),this.ctx.restore()},e.src=t}},s=class{constructor(t){this.ctx=t,this.addBackgroundImg(this.ctx)}addBackgroundImg(t){const e=document.querySelector("#main-background-img");t.drawImage(e,-750,-400)}},i=class{constructor(){this.renderLogo(),this.renderTotal(),this.renderMenu(),"NaN"===localStorage.getItem("cashOnHand")&&localStorage.setItem("cashOnHand",0)}get cashOnHand(){let t=localStorage.getItem("cashOnHand");return t?parseInt(t):0}set cashOnHand(t){localStorage.setItem("cashOnHand",t.toString())}renderLogo(){const t=document.querySelector("#main-title-container"),e=document.createElement("img");e.setAttribute("src","./assets/output-onlinepngtools (2).png"),t.appendChild(e)}renderTotal(){document.querySelector("#main-total").innerHTML=`<h2>Total: $${this.cashOnHand}</h2>`}renderMenu(){document.querySelector("#main-menu").innerHTML="<h2>Menu</h2>"}subtractFromTotal(t){return this.cashOnHand>=t?(this.cashOnHand-=t,this.renderTotal(),!0):(console.log("insufficientfunds"),!1)}resetTotal(){this.cashOnHand=0,this.renderTotal()}},n=JSON.parse('{"I":[{"name":"Pistol","price":"10","imgSrc":"assets/pistol.png"},{"name":"Medicine","price":"20","imgSrc":"assets/Texture/money-bag.png"},{"name":"Horse","price":"30","imgSrc":"assets/pony.png"},{"name":"Fire","price":"50","imgSrc":"assets/Texture/fire.png","method":"","action":"","args":""},{"name":"level 1 chest","price":"60","imgSrc":"assets/Texture/chest-level-1.png"},{"name":"Experienced Hired Hand","price":"70","imgSrc":"assets/output-onlinepngtools (3).png","method":"mainCharacter","action":"autoClick","args":[]},{"name":"Auto Plant","price":"100","imgSrc":"assets/Texture/wheel.png"},{"name":"Gold Chest","price":"1000","imgSrc":"assets/Texture/gold-chest.png"},{"name":"Crown","price":"1000000","imgSrc":"assets/crown.png","method":"mainCharacter","action":"displayVictoryCrown","args":["assets/crown.png"]}]}'),a=class{constructor(t,e){this.shop=document.querySelector("#main-shop"),this.headerContent=t,this.mainCharacter=e,this.renderTitle(),this.renderShopItems(),this.renderStats()}renderTitle(){let t=document.createElement("h2");t.setAttribute("id","shop-title"),t.innerText="Shop",this.shop.appendChild(t)}renderShopItems(){n.I.forEach((t=>{let e=document.createElement("div");e.setAttribute("class","shop-item"),e.setAttribute("name",t.name);let s=document.createElement("p");s.innerText=`$${t.price}`;let i=new Image(50,50);i.src=`${t.imgSrc}`,e.appendChild(i),e.appendChild(s),this.shop.appendChild(e),e.addEventListener("click",(()=>{this.headerContent.subtractFromTotal(`${t.price}`)&&t.method&&t.action&&this[t.method][t.action](...t.args)}))}))}renderStats(){let t=document.createElement("div");t.setAttribute("id","main-stats");let e=document.createElement("h2");e.setAttribute("style","text-decoration: underline; font-size: 20px; margin: 5px 0px 5px 20px;"),e.innerText="Current Stats",t.appendChild(e),this.shop.appendChild(t)}},window.addEventListener("load",(()=>{console.log("content has been loaded");const t=document.getElementById("canvas"),n=t.getContext("2d"),r=(new s(n),new i),c=new e(n,{pos:[200,200],size:[75,125],img:"assets/Cowboy4_idle without gun_2 copy.png"},r);t.addEventListener("click",(e=>{const s=t.getBoundingClientRect(),i=e.clientX-s.left,n=e.clientY-s.top;e.canvasX=i,e.canvasY=n,c.clickHandler(e)})),new a(r,c)}))}();
//# sourceMappingURL=main.js.map