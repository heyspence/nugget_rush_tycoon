!function(){"use strict";var t,e,s,i,a,n,o,r,c;t=class{constructor(t){this.ctx=t,this.addBackgroundImg(this.ctx)}addBackgroundImg(t){const e=document.querySelector("#main-background-img");t.drawImage(e,-750,-400)}},e=class{constructor(){this.renderLogo(),this.renderTotal(),this.renderMenu(),"NaN"===localStorage.getItem("cashOnHand")&&localStorage.setItem("cashOnHand",0)}get cashOnHand(){let t=localStorage.getItem("cashOnHand");return t?parseInt(t):0}set cashOnHand(t){localStorage.setItem("cashOnHand",t.toString())}renderLogo(){const t=document.querySelector("#main-title-container"),e=document.createElement("img");e.setAttribute("src","./assets/output-onlinepngtools (2).png"),t.appendChild(e)}renderTotal(){document.querySelector("#main-total").innerHTML=`<h2>Total: $${this.cashOnHand}</h2>`}renderMenu(){document.querySelector("#main-menu").innerHTML="<h2>Menu</h2>"}subtractFromTotal(t){return this.cashOnHand>=t?(this.cashOnHand-=t,this.renderTotal(),!0):(console.log("insufficientfunds"),!1)}resetTotal(){this.cashOnHand=0,this.renderTotal()}},s=JSON.parse('{"I":[{"name":"pistol","price":"10","imgSrc":"assets/pistol.png"},{"name":"money-bag","price":"20","imgSrc":"assets/Texture/money-bag.png"},{"name":"horse","price":"30","imgSrc":"assets/pony.png"},{"name":"fire","price":"100","imgSrc":"assets/Texture/fire.png","class":"StaticObject","args":{"pos":[380,290],"size":[110,110],"img":"assets/Texture/fire.png","ability":"increaseSpeed"},"newInstance":true},{"name":"level-1-chest","price":"200","imgSrc":"assets/Texture/chest-level-1.png","class":"StaticObject","args":{"pos":[110,300],"size":[75,75],"img":"assets/Texture/chest-level-1.png","ability":"increaseMaxStorage"},"newInstance":true},{"name":"experienced-hired-hand","price":"1000","imgSrc":"assets/output-onlinepngtools (3).png","method":"mainCharacter","action":"autoClick","args":[]},{"name":"auto-plant","price":"100","imgSrc":"assets/Texture/wheel.png"},{"name":"house","price":"10000","imgSrc":"assets/Wild West Props 16x16 (v1.5)/Building\'s/house copy.png","class":"StaticObject","args":{"pos":[400,48],"size":[224,160],"idleImg":"assets/Wild West Props 16x16 (v1.5)/Building\'s/house.png","img":"assets/Wild West Props 16x16 (v1.5)/Building\'s/house.png","ability":"increaseMaxStorage"},"newInstance":true},{"name":"crown","price":"100000","imgSrc":"assets/crown.png","method":"mainCharacter","action":"displayVictoryCrown","args":["assets/crown.png"]}]}'),i=class{constructor(t,e){this.ctx=t,this.img=e.img,this.size=e.size,this.pos=e.pos,this.scale=e.scale?e.scale:[1,1],this.drawImg(),this[e.ability]()}drawImg(){const t=new Image;t.onload=()=>{this.ctx.save(),this.ctx.scale(...this.scale),this.ctx.drawImage(t,...this.pos,...this.size),this.ctx.restore()},t.src=this.img}increaseMaxStorage(){let t=parseInt(localStorage.getItem("maxGold"));localStorage.setItem("maxGold",10*t),o.updateStats()}increaseSpeed(){let t=parseFloat(localStorage.getItem("loadSpeed"));localStorage.setItem("loadSpeed",t+.35);let e=parseInt(localStorage.getItem("animationSpeed"));localStorage.setItem("animationSpeed",e-50)}},a=class{constructor(t,e,s){this.ctx=t,this.pos=[e[0]-15,e[1]-22],this.size=[140,15],this.loadTime=.5,this.currentWidth=0,this.clickableObject=s,this.complete=!1,this.animating=!1,localStorage.getItem("loadSpeed")||localStorage.setItem("loadSpeed",.5)}get loadSpeed(){return parseFloat(localStorage.getItem("loadSpeed"))}set loadSpeed(t){localStorage.setItem("loadSpeed",t)}animate=()=>{let t=parseInt(localStorage.getItem("cashOnHand")),e=parseInt(localStorage.getItem("maxGold"));if(this.animating)return;if(t>=e)return void console.log("storage insufficient");this.drawBackground();const s=()=>{if(this.complete)this.reset();else{if(this.clickableObject.animate(),this.currentWidth>=this.size[0]){let t=Math.floor(100*Math.random());this.ctx.clearRect(...this.pos,...this.size),this.clickableObject.addToTotal(t),this.complete=!0,this.clickableObject.stopAnimation(),this.renderReward(t)}this.animating=!0,this.currentWidth+this.loadSpeed>this.size[0]?this.currentWidth=this.size[0]:this.currentWidth+=this.loadSpeed,this.update(),requestAnimationFrame(s)}};s()};update(){this.ctx.fillStyle="rgb(253 214 67)",this.ctx.fillRect(this.pos[0]+2,this.pos[1]+3,this.currentWidth,this.size[1])}clear(){this.ctx.clearRect(this.pos[0]-2,this.pos[1],this.size[0]+8,this.size[1]+6)}isComplete(){return this.currentWidth>=this.size[0]}reset(){this.currentWidth=0,this.clear(),this.animating=!1,this.complete=!1}renderReward(t){this.ctx.fillStyle="rgb(253 214 67)",this.ctx.strokeStyle="rgb(178 98 18)",this.ctx.font="42px Luckiest Guy",this.ctx.fillText(`+$${t}`,this.pos[0]+120,this.pos[1]+220),this.ctx.strokeText(`+$${t}`,this.pos[0]+120,this.pos[1]+220);let e=this.ctx.measureText(`+$${t}`).width;setTimeout((()=>this.ctx.clearRect(this.pos[0]+120,this.pos[1]+186,e,38)),1e3)}drawBackground(){this.ctx.fillStyle="rgb(38 22 23)",this.ctx.fillRect(this.pos[0]-2,this.pos[1],this.size[0]+8,this.size[1]+6)}},n=class{constructor(t,e,s){this.ctx=t,this.ctx.imageSmoothingEnabled=!1,this.imgList=[];for(let t=1;t<Object.keys(e).length;t++)e["img"+t]&&this.imgList.push(e["img"+t]);for(let t=0;t<this.imgList.length;t++)this["img"+(t+1)]=this.loadImg(this.imgList[t]);this.counter=0,this.idleImg=this.loadImg(e.idleImg),this.currentImg=this.imgList[0],this.toggleInterval=null,this.size=e.size,this.pos=e.pos,this.headerContent=s,this.scale=e.scale?e.scale:[1,1];const i=new a(this.ctx,this.pos,this);this.progressBar=i,this.idleImg.onload=()=>{this.ctx.clearRect(...this.pos,...this.size),this.ctx.drawImage(this.idleImg,...this.pos,...this.size)},this.renderIdle(),localStorage.getItem("animationSpeed")||localStorage.setItem("animationSpeed",450)}get animationSpeed(){return parseInt(localStorage.getItem("animationSpeed"))}set animationSpeed(t){localStorage.setItem("animationSpeed",t)}loadImg(t){let e=new Image;return e.src=t,e}renderIdle(){this.ctx.clearRect(...this.pos,...this.size),this.ctx.drawImage(this.idleImg,...this.pos,...this.size)}animate(){this.toggleInterval||(this.toggleInterval=setInterval((()=>{this.toggleImages()}),this.animationSpeed))}toggleImages(){let t=[this.img1,this.img2];this.counter===t.length-1?this.counter=0:this.counter++,this.ctx.clearRect(...this.pos,...this.size),this.ctx.drawImage(t[this.counter],...this.pos,...this.size)}stopAnimation(){this.toggleInterval&&(clearInterval(this.toggleInterval),this.toggleInterval=null,this.currentImg=this.img4,this.renderIdle())}clickHandler(t){const e=[this.pos[0],this.pos[0]+this.size[0]],s=t.canvasX>=e[0]&&t.canvasX<=e[1],i=[this.pos[1],this.pos[1]+this.size[1]],a=t.canvasY>=i[0]&&t.canvasY<=i[1];s&&a&&this.progressBar.animate()}addToTotal(t){this.headerContent.cashOnHand=this.headerContent.cashOnHand+t,this.headerContent.renderTotal()}autoClick(){setInterval(this.progressBar.animate,450)}},o=class{constructor(t,e){this.shop=document.querySelector("#main-shop"),this.headerContent=t,this.mainCharacter=e,this.ctx=e.ctx,localStorage.getItem("maxGold")||localStorage.setItem("maxGold",1e3),this.renderTitle(),this.renderShopItems(),this.renderStats()}get maxGold(){let t=localStorage.getItem("maxGold");return parseInt(t)}set maxGold(t){localStorage.setItem("maxGold",t.toString())}static updateStats(){let t=localStorage.getItem("maxGold");t=parseInt(t),document.querySelector("#max-gold").innerText=`Max storage: $${t}`,document.querySelector("#best-time").innerText="Best Time: TBD"}renderTitle(){let t=document.createElement("h2");t.setAttribute("id","shop-title"),t.innerText="Shop",this.shop.appendChild(t)}renderShopItems(){s.I.forEach((t=>{let e=document.createElement("div");e.setAttribute("class","shop-item"),e.setAttribute("id",t.name),e.classList.add("btn");let s=document.createElement("p");s.innerText=`$${t.price}`;let a=new Image(50,50);a.src=`${t.imgSrc}`,e.appendChild(a),e.appendChild(s),this.shop.appendChild(e);const o={StaticObject:i,ClickableObject:n};e.addEventListener("click",(()=>{this.headerContent.subtractFromTotal(`${t.price}`)&&(t.newInstance?new(0,o[t.class])(this.ctx,t.args,this.headerContent):t.method&&this[t.method][t.action](...t.args))}))}))}renderStats(){let t=document.createElement("div");t.setAttribute("id","main-stats");let e=document.createElement("h2");e.innerText="Current Stats";let s=document.createElement("p");s.setAttribute("id","max-gold"),s.innerText=`Max storage: $${this.maxGold}`;let i=document.createElement("p");i.setAttribute("id","best-time"),i.innerText="Best Time: TBD",t.appendChild(e),t.appendChild(s),t.appendChild(i),this.shop.appendChild(t)}},r=class extends n{constructor(t,e,s){super(t,e,s)}displayVictoryCrown(t){const e=new Image;e.onload=()=>{this.ctx.save(),this.ctx.scale(...this.scale),this.ctx.drawImage(e,this.pos[0]-10,this.pos[1]+10,110,110),this.ctx.restore()},e.src=t}},c=class{constructor(){document.querySelector("#main-menu").addEventListener("click",this.revealModal.bind(this)),this.overlay=document.querySelector(".overlay"),this.modal=document.querySelector(".modal"),document.querySelector(".btn-close").addEventListener("click",this.hideModal.bind(this)),this.overlay.addEventListener("click",this.hideModal.bind(this)),document.querySelector("#reset").addEventListener("click",this.resetGame.bind(this)),document.querySelector("#demo").addEventListener("click",this.setDemo.bind(this))}revealModal(){console.log("menu clicked"),this.modal.classList.remove("hidden"),this.overlay.classList.remove("hidden")}hideModal(){this.modal.classList.add("hidden"),this.overlay.classList.add("hidden")}resetGame(){localStorage.clear(),location.reload()}setDemo(){localStorage.setItem("cashOnHand",1e5),localStorage.setItem("maxGold",1e6),location.reload()}},window.addEventListener("load",(()=>{console.log("content has been loaded");const s=document.getElementById("canvas"),i=document.getElementById("canvas2"),a=s.getContext("2d"),n=i.getContext("2d"),l=(new t(a),new c,new e),h=new r(n,{pos:[200,175],size:[150,170],img1:"assets/Cowboy 4 HiRes/Cowboy4_idle without gun_3.png",img2:"assets/finalShovel.png",idleImg:"assets/Cowboy 4 HiRes/Cowboy4_idle without gun_1.png"},l);i.addEventListener("click",(t=>{const e=i.getBoundingClientRect(),s=t.clientX-e.left,a=t.clientY-e.top;t.canvasX=s,t.canvasY=a,h.clickHandler(t)})),new o(l,h)}))}();
//# sourceMappingURL=main.js.map